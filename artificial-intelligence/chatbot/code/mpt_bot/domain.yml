version: '3.1'

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

intents:
  # Alex Start  -----------------------------------------------------------
  - greet
  - goodbye
  - find_next_train
  - find_best_route
  - ask_direct_route
  - ask_transfers
  - ask_best_route
  - ask_least_stops_route
  - ask_quickest_route
  - affirm
  - deny
  - bot_challenge
  - request_train_map
  - request_tram_map
  - request_bus_map
#  - find_next_bus
#  - find_next_tram
  - check_disruptions_tram
  - check_disruptions_bus
  - check_disruptions_train
  # Alex finish intents  ----------------------------------------------------------
  - run_direction_script
  - provide_location
  - provide_destination
  - ask_about_feature
  - ask_about_station
  - list_all_stations
  - nlu_fallback
  - list_stations_with_feature

entities:
  # Alex Start entities  -----------------------------------------------------------
  - station_a
  - station_b
  - current_longitude
  - current_latitude
  - transport_modes
  - route_name
  # Alex finish entities  ----------------------------------------------------------

slots:
  # Alex Start slots  ---------------------------------------------------------------
  station_a:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: station_a
  station_b:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: station_b
#  transport_modes:
#    type: list
#    mappings:
#      - type: from_text
#  current_longitude:
#    type: float
#    mappings:
#      - type: from_entity
#        entity: current_longitude
#  current_latitude:
#    type: float
#    mappings:
#     - type: from_entity
#       entity: current_latitude
  # Alex Finish slots  --------------------------------------------------------------
  user_location:
    type: text
    mappings:
      - type: from_text
  destination:
    type: text
    mappings:
      - type: from_text

  station_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: station_name

  feature:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: feature
responses:
  # Alex Start responses -----------------------------------------------------------
  utter_ask_origin:
    - text: "Where are you starting your journey?"
  utter_ask_destination:
    - text: "Where do you want to go?"
  utter_ask_transport_modes:
    - text: "What modes of transport would you like to use (e.g., train, tram, bus)?"
  utter_confirm_transport_modes:
    - text: "You want to use these transport modes: {transport_modes}."
  utter_goodbye:
    - text: "Goodbye!"
  utter_challenge:
    - text: "I am a bot, here to help you plan your journey!"
  utter_ask_for_station_b:
    - text: "Which station would you like to travel to?"
  utter_ask_station_a:
    - text: "From which station are you starting your journey?"
  utter_ask_station_b:
    - text: "To which station are you traveling?"
  utter_no_direct_route:
    - text: "No direct route found. Finding the best route with transfers..."
  utter_yes_direct_route:
    - text: "Yes, there is a direct train from {station_a} to {station_b}."
  utter_no_transfers_needed:
    - text: "There is a direct train from {station_a} to {station_b}, so no transfers are needed."
  utter_transfers_needed:
    - text: "You will need to make {transfers} transfer(s) to get from {station_a} to {station_b}."
  utter_best_route_with_transfers:
    - text: "The best route from {station_a} to {station_b} involves the following transfers: {route}.\nTotal travel time is approximately {travel_time} minutes."
  utter_ask_start_and_end_stations:
    - text: "Please specify both the starting and destination stations."
  utter_greet:
    - text: "Hey! How are you?"
  utter_cheer_up:
    - text: "Here is something to cheer you up:"
      image: https://i.imgur.com/nGF1K8f.jpg
  utter_did_that_help:
    - text: "Did that help you?"
  utter_happy:
    - text: "Great, carry on!"
  utter_iamabot:
    - text: "I am a bot, powered by Rasa."
  utter_ask_station_for_bus:
    - text: "Which station are you departing from for the bus?"
  utter_ask_station_for_tram:
    - text: "Which station are you departing from for the tram?"
  utter_next_tram_schedule:
    - text: "Upcoming tram schedules from {station_a}:\n{schedule}"
  utter_next_bus_schedule:
    - text: "Upcoming bus schedules from {station_a}:\n{schedule}"
  utter_next_train_schedule:
      - text: "Upcoming train schedules from {station_a}:\n{schedule}"

  utter_no_upcoming_buses:
    - text: "No upcoming buses found from {station_a}."

  utter_no_upcoming_trams:
    - text: "No upcoming trams found from {station_a}."

#  utter_ask_train_route:
#    - text: "Which train route would you like to check for disruptions (e.g., 'Sandringham Line')?"

# Alex Finish responses -----------------------------------------------------------

  utter_script_executed:
  - text: "The direction script has been executed successfully."

  utter_script_failed:
  - text: "There was an error executing the direction script."

  utter_ask_location:
  - text: "Please provide your location."

  utter_ask_destination:
  - text: "Great! Now, please provide your destination."

actions:
# Alex Start Actions  -----------------------------------------------------------
- action_generate_train_map
- action_generate_tram_map
- action_generate_bus_map
- action_find_next_train
#- action_find_next_bus
#- action_find_next_tram
- action_find_best_route
- action_calculate_transfers
- action_check_direct_route
- action_find_best_route_with_transfers
- action_check_train_change
- action_find_route_with_least_stops
- action_generate_route_map
- action_check_disruptions_tram
- action_check_disruptions_bus
- action_check_disruptions_train
# Alex Finish Actions  -----------------------------------------------------------
- action_run_direction_script
- action_check_feature
- action_check_station
- action_list_all_stations
- action_list_stations_with_feature
